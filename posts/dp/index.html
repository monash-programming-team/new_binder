<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Dynamic Programming" /><meta name="author" content="Jackson Goerner" /><meta property="og:locale" content="en_US" /><meta name="description" content="Why?" /><meta property="og:description" content="Why?" /><link rel="canonical" href="https://blog.monashicpc.com/new_binder//new_binder/posts/dp/" /><meta property="og:url" content="https://blog.monashicpc.com/new_binder//new_binder/posts/dp/" /><meta property="og:site_name" content="Monash Code Binder" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-26T10:32:00+11:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Dynamic Programming" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Jackson Goerner" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Jackson Goerner"},"description":"Why?","headline":"Dynamic Programming","dateModified":"2021-12-13T11:01:10+11:00","url":"https://blog.monashicpc.com/new_binder//new_binder/posts/dp/","datePublished":"2021-03-26T10:32:00+11:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.monashicpc.com/new_binder//new_binder/posts/dp/"},"@context":"https://schema.org"}</script><title>Dynamic Programming | Monash Code Binder</title><link rel="shortcut icon" href="/new_binder/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/new_binder/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="manifest" href="/new_binder/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/new_binder/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/new_binder/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/new_binder/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/new_binder/assets/js/dist/post.min.js"></script> <script src="/new_binder/assets/js/code-tabs.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@5.2/distr/fira_code.css"> <script src="/new_binder/assets/js/hints.js"></script> <script src="/new_binder/assets/js/highlight.js"></script> <script defer src="/new_binder/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/new_binder/" alt="avatar" class="mx-auto"> <img src="/new_binder/assets/img/icpc.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/new_binder/">Monash Code Binder</a></div><div class="site-subtitle font-italic">For Training / Contests</div></div><ul class="w-100"><li class="nav-item"> <a href="/new_binder/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/new_binder/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/new_binder/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/new_binder/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/new_binder/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://discord.link/MonashICPC" aria-label="discord" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://www.facebook.com/groups/454114112027992" aria-label="facebook" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jackson','monashicpc.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/new_binder/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/new_binder/"> Posts </a> </span> <span>Dynamic Programming</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Dynamic Programming</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jackson Goerner </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Mar 26, 2021, 10:32 AM +1100" > Mar 26, 2021 <i class="unloaded">2021-03-26T10:32:00+11:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Dec 13, 2021, 11:01 AM +1100" > Dec 13, 2021 <i class="unloaded">2021-12-13T11:01:10+11:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="812 words">4 min</span></div></div><div class="post-content"><h1 id="why">Why?</h1><p>Dynamic Programming (DP) is one of the most powerful tools you’ll come across in competitive programming. It normally turns up in about a third of all problems in a contest, in some form or another.</p><h1 id="what-is-it">What is it?</h1><p>Dynamic Programming is a general tactic centred around storing previous calculations so that you don’t need to recompute the outcome of certain functions. While this might seem like common sense, these precomputed calculations can hide themselves quite well.</p><h1 id="example">Example</h1><p>One of the most popular applications of DP in contests is in solving recurrence relations in a short amount of time. Consider the following problem, <a href="https://codeforces.com/problemset/problem/189/A">Cut Ribbon</a>:</p><p>Polycarpus has a ribbon, its length is n. He wants to cut the ribbon in a way that fulfils the following two conditions:</p><ul><li>After the cutting each ribbon piece should have length a, b or c.<li>After the cutting the number of ribbon pieces should be maximum.</ul><p>Help Polycarpus and find the number of ribbon pieces after the required cutting.</p><h2 id="input">Input</h2><p>The first line contains four space-separated integers n, a, b and c (1 ≤ n, a, b, c ≤ 4000) — the length of the original ribbon and the acceptable lengths of the ribbon pieces after the cutting, correspondingly. The numbers a, b and c can coincide.</p><h2 id="output">Output</h2><p>Print a single number — the maximum possible number of ribbon pieces. It is guaranteed that at least one correct ribbon cutting exists.</p><h2 id="solution">Solution</h2><p>Let’s try to create a function <code class="language-plaintext highlighter-rouge">max_cuts(x)</code>, which tells us the maximum number of cuts for a ribbon of size <code class="language-plaintext highlighter-rouge">x</code>. We want to compute <code class="language-plaintext highlighter-rouge">max_cuts(n)</code>.</p><p>Since every possible cutting of the ribbon must start with a cut of size <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">b</code>, or <code class="language-plaintext highlighter-rouge">c</code>, <code class="language-plaintext highlighter-rouge">max_cuts(x)</code> must be either <code class="language-plaintext highlighter-rouge">max_cuts(x-a)+1</code>, <code class="language-plaintext highlighter-rouge">max_cuts(x-b)+1</code> or <code class="language-plaintext highlighter-rouge">max_cuts(x-c)+1</code> (Assuming base case <code class="language-plaintext highlighter-rouge">max_cuts(0) == 0</code>).</p><p>Therefore, we can define <code class="language-plaintext highlighter-rouge">max_cuts</code> recursively in the following way:</p><div class="code-tab"> <button class="code-tablinks DP-1-link" onclick="openCodeTab(event, 'DP-1', 'DP-1-Python')">Python</button> <button class="code-tablinks DP-1-link" onclick="openCodeTab(event, 'DP-1', 'DP-1-CPP')">CPP</button></div><div id="DP-1-Python" class="code-tabcontent DP-1"><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="n">best</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">cut</span> <span class="ow">in</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">-</span> <span class="n">cut</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">best</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">cut</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">best</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Not possible to cut this length.
</span>        <span class="n">best</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100000</span>
    <span class="k">return</span> <span class="n">best</span>

<span class="c1"># We then just call
</span><span class="n">max_cuts</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></table></code></div></div></div><div id="DP-1-CPP" class="code-tabcontent DP-1"><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">max_cuts</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">best</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="c1">// Not possible to cut this length.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">best</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100000</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">best</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div></div><p>However, if you submit this as is, you will almost certainly get TLE, despite <code class="language-plaintext highlighter-rouge">n &lt;= 4000</code>. Why is this?</p><p>Lets inspect the call tree for <code class="language-plaintext highlighter-rouge">max_cuts</code> with <code class="language-plaintext highlighter-rouge">n=5</code>, and <code class="language-plaintext highlighter-rouge">a, b, c = 1, 2, 3</code>:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/new_binder/assets/img/posts/dp/calls.png" alt="" /></p><p>As you can see, despite only taking 6 different values, <code class="language-plaintext highlighter-rouge">max_cuts</code> is being called a bunch of times, which is unnecessary! Instead, we can save each value with DP!</p><div class="code-tab"> <button class="code-tablinks DP-2-link" onclick="openCodeTab(event, 'DP-2', 'DP-2-Python')">Python</button> <button class="code-tablinks DP-2-link" onclick="openCodeTab(event, 'DP-2', 'DP-2-CPP')">CPP</button></div><div id="DP-2-Python" class="code-tabcontent DP-2"><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c1"># DP[x] = max_cut(x) if computed, or -1.n
</span><span class="n">DP</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="err"></span><span class="n">n</span>

<span class="k">def</span> <span class="nf">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="err"></span><span class="n">n</span>
        <span class="c1"># If already computed, just return the value!n
</span>        <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="err"></span><span class="n">n</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="err"></span><span class="n">m</span>
        <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="err"></span><span class="n">m</span>
    <span class="n">best</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">cut</span> <span class="ow">in</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">-</span> <span class="n">cut</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">best</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">cut</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">best</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Not possible
</span>        <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100000</span><span class="err"></span><span class="n">m</span>
        <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="err"></span><span class="n">m</span>
    <span class="c1"># Set the DP value, so that future calls to max_cuts(x) just use DP[x].n
</span>    <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">best</span><span class="err"></span><span class="n">n</span>
    <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="err"></span><span class="n">m</span>

<span class="n">max_cuts</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></table></code></div></div></div><div id="DP-2-CPP" class="code-tabcontent DP-2"><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="c1">// DP[x] = max_cut(x) if computed, or -1.n</span>
<span class="kt">int</span> <span class="n">DP</span><span class="p">[</span><span class="mi">4002</span><span class="p">];</span><span class="err"></span><span class="n">n</span>

<span class="kt">int</span> <span class="nf">max_cuts</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// If already computed, just return the value!n</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">];</span><span class="err"></span><span class="n">n</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="err"></span><span class="n">m</span>
        <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">];</span><span class="err"></span><span class="n">m</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">best</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">best</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">best</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Not possible.</span>
        <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100000</span><span class="p">;</span><span class="err"></span><span class="n">m</span>
        <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">];</span><span class="err"></span><span class="n">m</span>
    <span class="p">}</span>
    <span class="c1">// Set the DP value, so that future calls to max_cuts(x) just use DP[x].n</span>
    <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">best</span><span class="p">;</span><span class="err"></span><span class="n">n</span>
    <span class="k">return</span> <span class="n">DP</span><span class="p">[</span><span class="n">x</span><span class="p">];</span><span class="err"></span><span class="n">m</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Initiliase DP</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">4002</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">DP</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">max_cuts</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div></div><p>This won’t TLE, because we only need to compute 4001 values, <code class="language-plaintext highlighter-rouge">max_cuts(x)</code> for any <code class="language-plaintext highlighter-rouge">x</code> from 0 to <code class="language-plaintext highlighter-rouge">n</code>.</p></div><div class="problems"><h1>Related Problems</h1><ul><li><a href="https://codeforces.com/problemset/problem/602/B" target="_blank">CF 602B - Approximating a Constant Range</a><li><a href="https://codeforces.com/problemset/problem/1451/C" target="_blank">CF 1451C - String Equality</a><li><a href="https://codeforces.com/problemset/problem/706/C" target="_blank">CF 706C - Hard Problem</a><li> <a data-toggle="tooltip" data-html="true" title="This problem cannot be linked to. If it is from NZPC or a Regional, you can probably find it on <a href='https://prog4fun.csse.canterbury.ac.nz/login/index.php' target='_blank'>this site</a>">NZPC 2019J - Going Fishing</a><li><a href="https://codeforces.com/problemset/problem/16/E" target="_blank">CF 16E - Fish</a><li> <a data-toggle="tooltip" data-html="true" title="This problem cannot be linked to. If it is from NZPC or a Regional, you can probably find it on <a href='https://prog4fun.csse.canterbury.ac.nz/login/index.php' target='_blank'>this site</a>">NZPC 2019M - Surfing</a><li><a href="https://codeforces.com/problemset/problem/922/E" target="_blank">CF 922E - Birds</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/new_binder/categories/data-structures/'>Data Structures</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/new_binder/tags/difficulty-2/" class="post-tag no-text-decoration" >Difficulty 2</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU GPL V3</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/new_binder/posts/uf/">Union Find / DSU</a><li><a href="/new_binder/posts/dp/">Dynamic Programming</a><li><a href="/new_binder/posts/lca/">Least Common Ancestor (LCA)</a><li><a href="/new_binder/posts/factorization/">Primes and Factorization Techniques</a><li><a href="/new_binder/posts/mod/">Modular Arithmetic</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/new_binder/tags/difficulty-3/">Difficulty 3</a> <a class="post-tag" href="/new_binder/tags/difficulty-2/">Difficulty 2</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/new_binder/posts/uf/"><div class="card-body"> <span class="timeago small" > Dec 15, 2021 <i class="unloaded">2021-12-15T12:00:00+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Union Find / DSU</h3><div class="text-muted small"><p> Where is this useful? In many problems, translating into a graph structure can prove helpful, as we can describe our problem in very abstract terms. Once you’ve translated into this graph structu...</p></div></div></a></div><div class="card"> <a href="/new_binder/posts/lca/"><div class="card-body"> <span class="timeago small" > Apr 20, 2021 <i class="unloaded">2021-04-20T22:00:00+10:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Least Common Ancestor (LCA)</h3><div class="text-muted small"><p> Where is this useful? The Least Common Ancestor (LCA) data structure is useful wherever you have a directed graph where every vertex has out-degree \(\leq 1\). In more common terms, each vertex ha...</p></div></div></a></div><div class="card"> <a href="/new_binder/posts/problems-21-s2-c1/"><div class="card-body"> <span class="timeago small" > Aug 23, 2021 <i class="unloaded">2021-08-23T11:00:00+10:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Challenge Problems - 2021 Sem 2, Contest 1</h3><div class="text-muted small"><p> Sports Loans Statement Andrew is head of the sports club, and manages the inventory. Part of Andrew’s job is loaning footballs to people, and collecting those footballs once they have been used. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <a href="/new_binder/posts/mod/" class="btn btn-outline-primary" prompt="Newer"><p>Modular Arithmetic</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/new_binder/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//mcpc-1.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Dynamic Programming'; this.page.url = 'https://blog.monashicpc.com/new_binder//new_binder/posts/dp/'; this.page.identifier = '/posts/dp/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://discord.link/MonashICPC">Monash Programming Team</a>. <span data-toggle="tooltip" data-placement="top" title="Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/new_binder/tags/difficulty-3/">Difficulty 3</a> <a class="post-tag" href="/new_binder/tags/difficulty-2/">Difficulty 2</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/new_binder/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://blog.monashicpc.com/new_binder/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
